<!doctype html>
<html lang="fr">
	<head>
		<script src="boot.js"></script>
	</head>
	<body>

		<script>
			var loax_pool = {
				"draft_article_mptl" : $loc.tmpl + "draft-article.mptl"
			};
		</script>

		<div id="dev_testbar">
			<svg width="0" height="0" viewBox="0 0 48 48">
				<polygon points="27,35.59 40,22.59 40,31.91 24,47.91 8,31.91 8,22.59 21,35.59 21,0 27,0 "/>
			</svg>
			<h4>Voir</h4>
			<label for="show_articles_filtering">Filtering</label>
			<input id="show_articles_filtering" type="checkbox" name="show" value="articles_filtering">
			<label for="show_articles_publishing">Publishing</label>
			<input id="show_articles_publishing" type="checkbox" name="show" value="articles_publishing" checked>
			<label for="show_articles_displaying">Displaying</label>
			<input id="show_articles_displaying" type="checkbox" name="show" value="articles_displaying">
			<label for="show_social_networks_widgets">Widgets</label>
			<input id="show_social_networks_widgets" type="checkbox" name="show" value="social_networks_widgets">
			<label for="debug_marks">Masques</label>
			<input id="debug_marks" type="checkbox" value="true">
			<label for="long_strings">Texte &eacute;tendu</label>
			<input id="long_strings" type="checkbox" value="true">
			<label>Largeur</label>
			<input id="section_width_slider" type="range" min="20" max="120" step="10" value="100">
			<span id="section_width_tip"></span>
		</div>
		<script>
			// Functions
			function change_width(selector) {
				var w = $(selector).val() + "%";
				$("section").css("width", w);
				$("#section_width_tip").text(w + " (" + $("#dev_container").outerWidth(true) + "px)");
			}
			function check_debug_marks(selector) {
				if ($(selector).is(":checked")) {
					$("section").addClass("css-debug");
					$("section li:odd").css("background-color", "rgba(255, 0, 0, .5)");
					$("section li:even").css("background-color", "rgba(0, 255, 0, .5)");
					$("section > .clearfix > div").children().not("input").filter(":odd").css("background-color", "rgba(255, 255, 0, .5)");
					$("section > .clearfix > div").children().not("input").filter(":even").css("background-color", "rgba(0, 255, 255, .5)");
				} else {
					$("section").removeClass("css-debug");
					$("section li").css("background-color", "");
					$("section > .clearfix > div").children().css("background-color", "");
				}
			}
			function check_long_strings(selector) {
				if ($(selector).is(":checked")) {
					$("ul:not(.latest) > li > h4").html("Ceci est l&rsquo;intitul&eacute; de la rubrique dans laquelle l&rsquo;article est index&eacute;");
					$("ul:not(.latest) > li .over-block > .title").html("Ceci est un titre plut&ocirc;t long pour un article qui ne l&rsquo;est pas moins");
					$("ul:not(.latest) > li .over-block > p > .summary").html("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec aliquet eros eros, eget faucibus massa commodo id. Fusce tempus enim a ipsum mattis commodo. In hac habitasse platea dictumst. Nulla vel venenatis tellus, ut porttitor lacus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Vestibulum et tincidunt leo, vitae luctus felis. Aliquam at mollis urna. Nullam sodales luctus porta. Sed dapibus eget lorem non pretium. Suspendisse sed aliquam libero, semper luctus nulla. Sed interdum lacus varius libero rhoncus mattis. Cras consequat est non risus lobortis, a volutpat augue congue. Etiam nec commodo augue. Nulla dignissim velit vitae orci consectetur varius.<br>Nulla luctus facilisis purus, non dignissim magna vehicula vitae. Nunc arcu arcu, posuere a dolor eu, iaculis cursus mauris. Curabitur id libero at nulla aliquam molestie sit amet vitae massa. In hac habitasse platea dictumst. Sed convallis ut tortor eu dictum. Fusce tempus ipsum vitae metus.");
					$("ul:not(.latest) > li .over-block > p > .author").html("Ceci est le nom de plume de l&rsquo;auteure de l&rsquo;article");
					$("ul:not(.latest) > li:not(.other) .over-block > p > .author").html("Ceci est mon nom de plume");
				} else {
					$("ul:not(.latest) > li > h4").html("Rubrique");
					$("ul:not(.latest) > li .over-block > .title").html("Titre.");
					$("ul:not(.latest) > li .over-block > p > .summary").html("R&eacute;sum&eacute;.");
					$("ul:not(.latest) > li .over-block > p > .author").html("Auteure");
					$("ul:not(.latest) > li:not(.other) .over-block > p > .author").html("Moi");
				}
			}
			// Events
			$("html").on("click", "[name='show']", function() {
				var f = $(this).val();
				$("#" + f).toggle();
			});
			$("#section_width_slider").change(function() {change_width(this)});
			$("#section_width_slider").keyup(function() {change_width(this)});
			$("#debug_marks").change(function() {check_debug_marks(this)});
			$("#long_strings").change(function() {check_long_strings(this)});
			// Init
			$(document).ready(function() {
				change_width("#section_width_slider");
				check_debug_marks("#debug_marks");
				check_long_strings("#long_strings")
				$("[name='show']").each(function() {
					var f = $(this).val();
					if ($(this).is(":checked")) {
						$("#" + f).show();
					} else {
						$("#" + f).hide();
					}
				});
			});
		</script>


		<div id="dev_container" class="frame">

			<h2 class="red">Liste des articles <small>.article-list</small></h2>

			<!--------------------------------------------------------------->
			<!--| Articles Toolbar |-->
			<!--------------------------------------------------------------->
			<div class="tool-bar clearfix">

				<!--Search-->
				<dl class="sub-nav toggle left">
					<dt class="sub-list stack small">
						<a id="search_button" class="icon-search" href="javascript:void(0)" title="Rechercher dans les articles"><span class="text">Chercher</span></a>
						<ul id="search_filters" style="display: none;">
							<li><a href="javascript:void(0)" data-search="titre">Titre</a></li>
							<li><a href="javascript:void(0)" data-search="tag">Tag</a></li>
							<li><a href="javascript:void(0)" data-search="rubrique">Rubrique</a></li>
							<li><a href="javascript:void(0)" data-search="catégorie">Cat&eacute;gorie</a></li>
						</ul>
					</dt>
				</dl>
				<div id="search_field" class="validation-box left hide">
					<input id="search" class="validation radius" type="text" maxlength="64" placeholder="Votre recherche (p. ex. homoparentalit&eacute;)">
					<small class="error hide"></small>
					<button id="find" class="icon-reply small postfix" title="Lancer la recherche"><span class="text hide">Trouver</span></button>
				</div>
				<!--Filter-->
				<dl class="sub-nav left">
					<dt class="sub-list">
						<a id="filter_button" class="icon-filter" href="javascript:void(0)" title="Filtrer la liste des articles"><span class="text">Filtrer</span></a>
						<ul id="filters_list" class="small" style="display: none;">
							<li><a id="owner_drafts" href="javascript:void(0)">Mes brouillons</a></li>
							<li><a id="other_drafts" href="javascript:void(0)">Brouillons des autres</a></li>
							<li><a id="standbys" href="javascript:void(0)">&Agrave; v&eacute;rifier</a></li>
							<li><a id="onlines" href="javascript:void(0)">En ligne</a></li>
						</ul>
					</dt>
				</dl>
				<!--Write-->
				<dl class="sub-nav right">
					<dt>
						<a id="write_article" href="javascript:void(0)" class="icon-article medium" title="R&eacute;diger un nouvel article"><span class="text">&Eacute;crire</span></a>
					</dt>
				</dl>
			</div>
			<script>
				var article_list_tools = (function(options) {
					var defaults = {
						"search_delimiter"      : ":",    // String   Delimiter used between search filter and search value in search input. Default : ":"
						"search_spacing"        : 4.0,    // Float    Space deduced from search input total width when shown (rem). Default : 2.0
						"search_load_delay"     : 0,      // Integer  Time before search input expand on page load. Default : 0
						"anim_duration"         : 375     // Integer  Time during which animations are played. Default : 375
					};
					var settings = $.extend({}, defaults, options);
					return {
						init: function() {
							// functions
							function open_filters(d, dd) {
								var d = $conf.js_fx ? (d || 0) : 0, dd = dd || 0;
								$("#filters_list").delay(dd).fadeIn(d);
							}
							function close_filters(d) {
								var d = $conf.js_fx ? (d || 0) : 0;
								$("#filters_list").fadeOut(d);
							}
							function open_search(d, f) {
								var d = $conf.js_fx ? (d || 0) : 0, f = f || false;
								if (f) { $("#search_filters").slideDown(d / 2) }
								var w = $(".tool-bar").innerWidth() // compute search input width
								 - $("#search_button").outerWidth(true)
								 - $("#filter_button").outerWidth(true)
								 - $("#write_article").outerWidth(true)
								 - (f ? settings.search_spacing.toPx() : (settings.search_spacing * 2).toPx()); // arbitrary safety spacing (2rem / 4rem)
								var h = $("#search").css("height");
								$("#find").hide();
								$("#search").css("height", "100%");
								$("#search_field").css({ // reset css
									"width" : "0",
									"height" : "0",
									"margin-top" : parseFloat(h) / 2,
									"margin-left" : "0",
									"opacity" : "0"
								});
								$("#search_field").removeClass("hide");
								$("#search_field").animate({"width" : w, "height" : h, "margin-top" : "0", "opacity" : "1"}, d, function() {
									$("#search").css("height", "");
									$("#find").fadeIn(d);
									if (f) { $("#search").focus() } // focus search input
								});
							}
							function close_search(d) {
								var d = $conf.js_fx ? (d || 0) : 0;
								var m = $("#search_button").innerWidth();
								$("#search_filters").slideUp(d / 2);
								$("#search_field").animate({"width" : "0", "margin-left" : -m, "opacity" : "0"}, d, function() {
									$(this).addClass("hide");
								});
							}
							// events
							$("#search_button").click(function() {
								$("#search_filters").finish();
								$("#search_field").finish();
								$(this).toggleClass("active");
								$(this).blur()
								if ($(this).hasClass("active")) {
									if ($("#filter_button").hasClass("active")) {
										$("#filter_button").removeClass("active");
										close_filters();
									}
									open_search(settings.anim_duration, true);
								} else {
									close_search(settings.anim_duration);
								}
							});
							$("#filter_button").click(function() {
								$("#filters_list").finish();
								$(this).toggleClass("active");
								$(this).blur()
								if ($(this).hasClass("active")) {
									if ($("#search_button").hasClass("active")) {
										$("#search_button").removeClass("active");
										close_search(settings.anim_duration / 2);
										open_filters(settings.anim_duration / 2, settings.anim_duration /2);
									} else {
										open_filters(settings.anim_duration)
									}
								} else {
									close_filters(settings.anim_duration);
								}
							});
							$("#search_filters li a").click(function() {
								$(this).parent("li").siblings().children("a").removeClass("active");
								$(this).toggleClass("active");
								$(this).blur();
								var str = $("#search").val();
								var f = $(this).attr("data-search");
								if ($("#search").data("filter")) {
									str = str.replace($("#search").data("filter") + settings.search_delimiter, ""); // remove filter from search value
								}
								$("#search").data("filter", f);
								if ($(this).hasClass("active")) {
									str = f + settings.search_delimiter + str;
								} else {
									f = ""; // set search filter to empty
									$("#search").data("filter", f); // reset filter in search data
								}
								$("#search").val(str); // reset search value
								$("#search").focus(); // focus search input
								$("#search").select_text((f !== "" ? f.length + 1 : 0), str.length); // select search value in search input
							});
							$("#filters_list li a").click(function() {
								if ($("#filter_button").hasClass("orange")) {
									$("#filter_button").removeClass("orange");
									$("#articles_filters_alert").remove();
								}
								$(this).toggleClass("active");
								var c = $(this).clone();
								if ($(this).hasClass("active")) {
									if ($conf.js_fx) {
										$(this).animate({"opacity" : ".5"}, settings.anim_duration / 4).animate({"opacity" : "1"}, settings.anim_duration / 2);
									}
								} else {
									if ($conf.js_fx) {
										var x = $(this).offset().left;
										var y = $(this).offset().top;
										var w = $(this).outerWidth();
										c.css({"position" : "absolute", "left" : x, "top" : y, "padding" : ".5rem", "font-size" : ".9em", "z-index" : "10"})
										c.appendTo("body");
										c.addClass("label radius");
										c.animate({
											"left" : (x - w / 4).toString() + "px",
											"top" : (y - 16.0).toString() + "px",
											"padding" : ".75rem",
											"font-size" : "1.35em",
											"opacity" : ".75"
										}, settings.anim_duration / 2)
										.animate({"top" : (y + 8.0).toString() + "px", "opacity" : 0}, settings.anim_duration / 2, function() {
											c.remove();
										});
									}
								}
							});
							$("#search_filters").mouseenter(function() {
								$(this).data("hover", true);
							});
							$("#search_filters").mouseleave(function() {
								$(this).removeData("hover");
								if (!$("#search").is(":focus")) {
									$(this).slideUp($conf.js_fx ? settings.anim_duration / 2 : 0);
								}
							});
							$("#search").blur(function() {
								if ($("#search_filters").data("hover") !== true) {
									$("#search_filters").finish();
									if ($("#search_filters").is(":visible")) {
										$("#search_filters").slideUp($conf.js_fx ? settings.anim_duration / 2 : 0);
									}
								}
							});
							$("#search").focus(function() {
								$("#search_filters").finish();
								if ($("#search_filters").is(":hidden")) {
									$("#search_filters").slideDown($conf.js_fx ? settings.anim_duration / 2 : 0);
								}
							});
							$("#search").keyup(function(e) {
								var f = $("#search").data("filter") || "";
								var s = $(this).val().trim().replace(f + settings.search_delimiter, "");
								if (e.which == 27) { // Escape
									$("#search_button").removeClass("active");
									close_search(settings.anim_duration);
								} else if (e.which == 13) { // Enter
									if (s.length == 0) {
										$(this).set_validation(false, "Le champ de recherche est vide &hellip;");
									} else if (s.length > 0 && s.length <= 2) {
										$(this).set_validation(false, "La recherche doit comporter au moins trois lettres.");
									/* ============================================== */
									/* # Check illegal chars */
									/* ============================================== */
									/* forbidden chars -- '?', '&',  '=' (replaced by whitespaces below)
									 * illegal chars   -- '/', '\', '@' (warn user)
									 * special chars   -- ':', ',' ';' (delimiters are allowed but not yet implemented)
									 */
									} else if (/[\/\\@]/.test(s)) {
										$(this).set_validation(false, $msg.char_illegal);
									} else {
										/* ============================================ */
										/* # Replace forbidden and special chars */
										/* ============================================ */
										s = s.replace(/[\?=]/g, "").replace(/[\s&]+/, " ");
										$(this).val((f !== "" ? f + settings.search_delimiter : "") + s); // reset search value in search input after chars replacement
										$(this).blur();
										/* ============================================ */
										/* # Display articles with URL search params */
										/* ============================================ */
										window.history.pushState("", "", "?" + (f !== "" ? f + "=" : "") + s.replace(/\s/g, "&")); // live update address bar without reloading document (HTML5 method)
										displayArticles("?" + f + "=" + s); // display articles with params
									}
								} else if (s == 0 || s.length > 2) {
									$(this).set_validation(true, null, {"cls_valid" : ""}); // reset validation
								}
							});
							$(window).resize(function() {
								var w = $(".tool-bar").innerWidth() // compute search input width
								 - $("#search_button").outerWidth(true)
								 - $("#filter_button").outerWidth(true)
								 - $("#write_article").outerWidth(true)
								 - settings.search_spacing.toPx(); // arbitrary safety spacing (2rem)
								$("#search_field").css("width", w);
							});
							$(document).ready(function() {
								/* ================================================ */
								/* # Retrieve URL search params */
								/* ================================================ */
								var p = get_url_search_params();
								if (p !== null) {
									if (typeof p === "string") { // this is a search query
										$("#search").val(p.replace(/&/g, " ")); // feed search input with url search query
									} else if (typeof p === "object") { // this is search params (i.e. specifier + search query)
										var f = null;
										$("#search_filters li a").each(function() {
											if (p.hasOwnProperty($(this).attr("data-search"))) {
												$(this).addClass("active");
												f = $(this).attr("data-search");
												$("#search").data("filter", f);
											}
										});
										if (f == null) {
											$("#search").val(p[Object.keys(p)[0]].replace(/&/g, " ")); // feed search input with url search params (value only)
										} else {
											$("#search").val(f + settings.search_delimiter + p[f].replace(/&/g, " ")); // feed search input with url search params
										}
									}
									$("#search_button").toggleClass("active");
									setTimeout(function() {
										if (!$("#filter_button").hasClass("active")) {
											open_search(settings.anim_duration);
										}
									}, settings.search_load_delay);
								} else {
									$("#search").val(""); // clear search input (i.e. prevent any filtering bug)
								}
							});
						}
					}
				}());
				article_list_tools.init(); // launch

				// public vars
				var article_list_user_prefs_defaults = { // Les filtres d'affichage de la liste d'articles par défaut.
					"standbys"      : "true",              // Afficher les articles à valider par défaut ?
					"other_drafts"  : "false",             // Afficher les brouillons des autres par défaut ?
					"owner_drafts"  : "true",              // Afficher mes brouillons par défaut ?
					"onlines"       : "true"               // Afficher les articles en ligne par défaut ?
				}

				var article_list_user_prefs = (function() {
					return {
						reset: function() {
							localStorage.removeItem($prefs.articles_filters);
						},
						init: function() {
							// vars
							var articles_filters_cfg = {
								"#standbys" : ".standby li",
								"#other_drafts" : ".draft .other",
								"#owner_drafts" : ".draft .owner",
								"#onlines" : ".online li"
							};
							// functions
							function set_user_prefs_articles_filters(obj) { // register user prefs for articles filters
								var obj = obj || articles_filters_cfg;
								var usr = {};
								for (n in obj) {
									usr[n.cut(1)] = $(n).hasClass("active") ? "true" : "false";
								}
								localStorage.setItem($prefs.articles_filters, JSON.stringify(usr));
							}
							function get_user_prefs_articles_filters(defaults) { // retrieve user prefs for articles filters
								var defaults = defaults || article_list_user_prefs_defaults;
								if (localStorage.getItem($prefs.articles_filters) == null) {
									return defaults;
								} else {
									return JSON.parse(localStorage.getItem($prefs.articles_filters));
								}
							}
							function check_filters_switches(obj) { // toggle articles lists visibility
								var obj = obj || articles_filters_cfg;
								for (key in obj) {
									if ($(key).length > 0) { // if toggler exists (n.b. role check is made in the template)
										if ($(key).hasClass("active")) {
											$(obj[key]).show();
										} else {
											$(obj[key]).hide();
										}
									}
								}
							}
							// events
							$("#filters_list").mouseleave(function() {
								set_user_prefs_articles_filters(); // register prefs
							});
							$("#standbys, #other_drafts, #owner_drafts, #onlines").click(function() {
								check_filters_switches(); // check filters
							});
							// process
							$(document).ready(function() {
								var prefs = get_user_prefs_articles_filters(), k = 0;
								for (key in prefs) {
									if (prefs[key] == "true") {
										$("#" + key).addClass("active");
										if ($("#filters_list").find("#" + key).length > 0) {
											k++; // increment var if item exists and is set on
										}
									} else {
										$("#" + key).removeClass("active");
									}
								}
								//console.log("k = " + k); // DEBUG
								//console.log("items in list = " + $("#filters_list").children().size()); // DEBUG
								//docCookies.setItem($auth.user_role, $conf.role_admin); // TEMP : set as admin for tests
								//docCookies.setItem($auth.user_role, $conf.role_redac); // TEMP : set as redac for tests
								//docCookies.removeItem($auth.user_role); // set as admin for tests
								//if (OursesSecurity.isUserAdmin()) { alert("is admin!") } // DEBUG
								//else if (isRegRedac()) { alert("is redac!") } // DEBUG
								//else { alert("is anonymous!") } // DEBUG
								if ((OursesSecurity.isUserAdmin() || OursesSecurity.isUserWriter()) && k == 0) { // all switches are off
									$("#filter_button").addClass("orange");
									if (!window.location.search) { // no search params in url -- open filters
										$("#filter_button").addClass("active");
										$("#filters_list").fadeIn($conf.js_fx ? 250 : 0);
									}
									createAlertBox($msg.article_no_filter, "articles_filters_alert", {"class" : "warning"});
								}
								check_filters_switches()
							});
						}
					}
				}());
				//article_list_user_prefs.reset(); // DEBUG
				article_list_user_prefs.init(); // launch
			</script>

			<!--------------------------------------------------------------->
			<!--| UNUSED : Social Icons |-->
			<!--------------------------------------------------------------->
			<!--
			<ul class="right inline-list hide-for-small">
				<li><span class="icon-twitter small">Twitter&#8239;:</span>&nbsp;7</li>
				<li><span class="icon-facebook small">Facebook&#8239;:</span>&nbsp;6</li>
				<li><span class="icon-googleplus small">GooglePlus&#8239;:</span>&nbsp;1</li>
			</ul>
			-->

			<!--------------------------------------------------------------->
			<!--| Articles Filtering |-->
			<!--------------------------------------------------------------->
			<div id="articles_filtering">
				<h4>Articles Filtering</h4>
				<!--Drafts-->
				<ul class="article-list draft">
					<li class="owner intersec" style="display: none;">
						<div class="topic">
							<h4 class="rubric">Rubrique</h4>
						</div>
						<div class="over-block">
							<h4 class="title"></h4>
							<p class="overview">
								<time datetime="2014-09-01" class="date icon-edit tiny">1<sup>er</sup> septembre 2014</time>
								<span class="summary"></span>
								<strong class="author"></strong>
							</p>
							<a href="javascript:void(0)" class="over">Modifier l&rsquo;article</a>
							<p class="validate">
								<button class="icon-reply success tiny" title="Valider le brouillon" data-validate="0"><span class="hide">Valider</span></button>
								<button class="icon-remove alert tiny" title="Supprimer le brouillon" data-delete="0"><span class="hide">Supprimer</span></button>
							</p>
						</div>
					</li>
					<li class="other intersec" style="display: none;">
						<div class="topic">
							<h4 class="rubric">Rubrique</h4>
						</div>
						<div class="over-block">
							<h4 class="title"></h4>
							<p class="overview">
								<time datetime="2014-09-01" class="date icon-edit tiny">1<sup>er</sup> septembre 2014</time>
								<span class="summary"></span>
								<strong class="author"></strong>
							</p>
							<a href="javascript:void(0)" class="over" style="cursor: default;"></a>
							<p class="validate">
								<button class="icon-remove alert tiny" title="Supprimer" data-delete="0"><span class="hide">Supprimer</span></button>
							</p>
						</div>
					</li>
				</ul>
				<!--Standbys-->
				<ul class="article-list standby">
					<li class="intersec" style="display: none;">
						<div class="topic">
							<h4 class="rubric">Rubrique</h4>
						</div>
						<div class="over-block">
							<h4 class="title"></h4>
							<p class="overview">
								<time datetime="2014-09-01" class="date icon-alert tiny">1<sup>er</sup> septembre 2014</time>
								<span class="summary"></span>
								<strong class="author">Nom de l&rsquo;auteure</strong>
							</p>
							<a href="javascript:void(0)" class="over">Modifier l&rsquo;article</a>
							<p class="validate">
								<button class="icon-confirm success tiny" title="Publier" data-publish="1"><span class="hide">Publier</span></button>
								<button class="icon-cancel alert tiny" title="Renvoyer" data-invalidate="1"><span class="hide">Renvoyer</span></button>
							</p>
						</div>
					</li>
				</ul>
				<!--Onlines-->
				<ul class="article-list online">
					<li class="intersec" style="display: none;">
						<div class="topic">
							<h4 class="rubric">Rubrique</h4>
						</div>
						<div class="over-block">
							<h4 class="title"></h4>
							<p class="overview">
								<time datetime="2014-09-01" class="date icon-date tiny">1<sup>er</sup> septembre 2014</time>
								<span class="summary"></span>
								<strong class="author">Nom de l&rsquo;auteure</strong>
							</p>
							<a href="javascript:void(0)" class="over">Lire l&rsquo;article</a>
							<p class="validate">
								<button class="icon-folder tiny" title="Ajouter au dossier" data-folder="1"><span class="hide">Dossier</span></button>
								<button class="icon-reply alert tiny" title="Rappeler l'article" data-recall="1"><span class="hide">Rappeler</span></button>
							</p>
						</div>
					</li>
				</ul>
			</div>

			<!--------------------------------------------------------------->
			<!--| Articles Publishing |-->
			<!--------------------------------------------------------------->

			<div id="articles_publishing">
				<h4>Articles publishing</h4>

				<!------------------------------------------------------------->
				<!--| Drafts |-->
				<!------------------------------------------------------------->
				<ul class="article-list draft">

					<!--Side Validation-->
					<!--
					<li id="draft1" class="intersec owner" style="display: none;">
						<div class="topic"><h4 class="rubric">Rubrique</h4></div>
						<div class="row collapse" style="margin: 0;">
							<div class="column small-20">
								<div class="over-block"><h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-edit tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Modifier l&rsquo;article</a></div>
							</div>
							<div class="column small-4">
								<div id="draft1_validation" style="margin-left: .5rem; display: none;">
									<button class="small" style="margin-bottom: .25rem;">Valider</button>
									<br>
									<button class="small alert" style="margin-bottom: 0;" data-delete="1">Supprimer</button>
								</div>
							</div>
						</div>
					</li>
					-->

					<!--Bottom Validation-->
					<!--
					<li id="draft2" class="ideas owner" style="display: none;">
						<div class="topic"><h4 class="rubric">Rubrique</h4></div>
						<div class="over-block"><h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-edit tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Modifier l&rsquo;article</a></div>
						<div id="draft2_validation" class="text-right" style="height: 2.25rem;">
							<button class="tiny" style="display: none; margin-top: .5rem; margin-bottom: 0;">Valider</button><button class="alert tiny" style="display: none; margin-top: .5rem; margin-bottom: 0;" data-delete="2">Supprimer</button>
						</div>
					</li>
					-->

					<!--Inside Validation-->
					<!--
					<li id="draft3" class="educult owner" style="display: none;">
						<div class="topic"><h4 class="rubric">Rubrique</h4></div>
						<div class="over-block">
							<h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-edit tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Modifier l&rsquo;article</a>
							<div id="draft3_validation" style="display: none; position: absolute; top: 1.75rem; right: .625rem; margin-top: -1.125rem;">
								<button class="icon-reply success tiny" style="margin-bottom: 0; z-index: 100;" title="Valider le brouillon" data-validate="3"><span class="hide">Valider</span></button><button class="icon-remove alert tiny" style="margin-bottom: 0; z-index: 100;" title="Supprimer le brouillon" data-delete="3"><span class="hide">Supprimer</span></button>
							</div>
						</div>
					</li>
					<li id="draft4" class="educult other" style="display: none;">
						<div class="topic"><h4 class="rubric">Rubrique</h4></div>
						<div class="over-block">
							<h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-edit tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over" style="cursor: default;"></a>
							<div id="draft4_validation" style="display: none; position: absolute; top: 1.75rem; right: .625rem; margin-top: -1.125rem;">
								<button class="icon-remove alert tiny" style="margin-bottom: 0; z-index: 100;" title="Supprimer le brouillon" data-delete="4"><span class="hide">Supprimer</span></button>
							</div>
						</div>
					</li>
					-->
					<li class="educult owner" style="display: none;">
						<div class="topic"><h4 class="rubric">Rubrique</h4></div>
						<div class="over-block">
							<h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-edit tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Modifier l&rsquo;article</a>
							<div class="validate" style="display: none;">
								<button class="icon-reply success tiny" title="Valider le brouillon" data-validate="3"><span class="hide">Valider</span></button>
								<button class="icon-remove alert tiny" title="Supprimer le brouillon" data-delete="3"><span class="hide">Supprimer</span></button>
							</div>
						</div>
					</li>
					<li class="educult other" style="display: none;">
						<div class="topic"><h4 class="rubric">Rubrique</h4></div>
						<div class="over-block">
							<h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-edit tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over" style="cursor: default;"></a>
							<div class="validate" style="display: none;">
								<button class="icon-remove alert tiny" title="Supprimer le brouillon" data-delete="4"><span class="hide">Supprimer</span></button>
							</div>
						</div>
					</li>
				</ul>

				<!------------------------------------------------------------->
				<!--| Standbys |-->
				<!------------------------------------------------------------->
				<ul class="article-list standby">

					<!--Side Validation-->
					<!--
					<li id="standby1" class="intersec" style="display: none;">
						<div class="topic">
							<h4 class="rubric">Rubrique</h4>
						</div>
						<div class="row collapse" style="margin: 0;">
							<div class="column small-20">
								<div class="over-block"><h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-alert tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Modifier l&rsquo;article</a></div>
							</div>
							<div class="column small-4">
								<div id="standby1_validation" style="margin-left: .5rem; display: none;">
									<button class="small success" style="margin-bottom: .25rem;" data-publish="1">Publier</button>
									<br>
									<button class="small alert" style="margin-bottom: 0;">Renvoyer</button>
								</div>
							</div>
						</div>
					</li>
					-->

					<!--Bottom Validation-->
					<!--
					<li id="standby2" class="ideas" style="display: none;">
						<div class="topic">
							<h4 class="rubric">Rubrique</h4>
						</div>
						<div class="over-block"><h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-alert tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Modifier l&rsquo;article</a></div>
						<div id="standby2_validation" class="text-right" style="height: 2.25rem;">
							<button class="tiny success" style="display: none; margin-top: .5rem; margin-bottom: 0;" data-publish="2">Publier</button><button class="alert tiny" style="display: none; margin-top: .5rem; margin-bottom: 0;">Renvoyer</button>
						</div>
					</li>
					-->

					<!--Inside Validation-->
					<!--
					<li id="standby3" class="educult" style="display: none;">
						<div class="topic">
							<h4 class="rubric">Rubrique</h4>
						</div>
						<div class="over-block">
							<h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-alert tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Modifier l&rsquo;article</a>
							<div id="standby3_validation" style="display: none; position: absolute; top: 1.75rem; right: .625rem; margin-top: -1.125rem;">
								<button class="icon-confirm success tiny" style="margin-bottom: 0; z-index: 100;" title="Publier l'article" data-publish="3"><span class="hide">Publier</span></button><button class="icon-cancel alert tiny" style="margin-bottom: 0; z-index: 100;" title="Renvoyer l'article aux brouillons" data-invalidate="3"><span class="hide">Renvoyer</span></button>
							</div>
						</div>
					</li>
					-->
					<li class="educult" style="display: none;">
						<div class="topic">
							<h4 class="rubric">Rubrique</h4>
						</div>
						<div class="over-block">
							<h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-alert tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Modifier l&rsquo;article</a>
							<div class="validate" style="display: none;">
								<button class="icon-confirm success tiny" title="Publier l'article" data-publish="3"><span class="hide">Publier</span></button>
								<button class="icon-cancel alert tiny" title="Renvoyer l'article aux brouillons" data-invalidate="3"><span class="hide">Renvoyer</span></button>
							</div>
						</div>
					</li>
				</ul>

				<!------------------------------------------------------------->
				<!--| Onlines |-->
				<!------------------------------------------------------------->
				<ul id="online_articles" class="article-list online">
					<!--Outlooks-->
					<li class="outlook intersec"><div class="topic"><h4 class="rubric">Rubrique</h4></div><div class="over-block"><h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-date tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Lire l&rsquo;article</a><p class="validate" style="display: none;"><button class="icon-folder tiny" title="Ajouter au dossier" data-folder="7"><span class="hide">Dossier</span></button><button class="icon-reply alert tiny" title="Rappeler l'article" data-recall="0"><span class="hide">Rappeler</span></button></p></div></li>
					<li class="outlook ideas"><div class="topic"><h4 class="rubric">Rubrique</h4></div><div class="over-block"><h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-date tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Lire l&rsquo;article</a><p class="validate" style="display: none;"><button class="icon-folder tiny" title="Ajouter au dossier" data-folder="7"><span class="hide">Dossier</span></button><button class="icon-reply alert tiny" title="Rappeler l'article" data-recall="0"><span class="hide">Rappeler</span></button></p></div></li>
					<li class="outlook educult"><div class="topic"><h4 class="rubric">Rubrique</h4></div><div class="over-block"><h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-date tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Lire l&rsquo;article</a><p class="validate" style="display: none;"><button class="icon-folder tiny" title="Ajouter au dossier" data-folder="7"><span class="hide">Dossier</span></button><button class="icon-reply alert tiny" title="Rappeler l'article" data-recall="0"><span class="hide">Rappeler</span></button></p></div></li>
					<!--Onlines-->
					<li class="intersec" style="display: none;"><div class="topic"><h4 class="rubric">Rubrique</h4></div><div class="over-block"><h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-date tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Lire l&rsquo;article</a><p class="validate" style="display: none;"><button class="icon-folder tiny" title="Ajouter au dossier" data-folder="7"><span class="hide">Dossier</span></button><button class="icon-reply alert tiny" title="Rappeler l'article" data-recall="0"><span class="hide">Rappeler</span></button></p></div></li>
					<li class="ideas" style="display: none;"><div class="topic"><h4 class="rubric">Rubrique</h4></div><div class="over-block"><h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-date tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Lire l&rsquo;article</a><p class="validate" style="display: none;"><button class="icon-folder tiny" title="Ajouter au dossier" data-folder="13"><span class="hide">Dossier</span></button><button class="icon-reply alert tiny" title="Rappeler l'article" data-recall="0"><span class="hide">Rappeler</span></button></p></div></li>
					<li class="educult" style="display: none;"><div class="topic"><h4 class="rubric">Rubrique</h4></div><div class="over-block"><h4 class="title"></h4><p class="overview"><time datetime="2014-09-01" class="date icon-date tiny">1<sup>er</sup> septembre 2014</time><span class="summary"></span><strong class="author"></strong></p><a href="javascript:void(0)" class="over">Lire l&rsquo;article</a><p class="validate" style="display: none;"><button class="icon-folder tiny" title="Ajouter au dossier" data-folder="4"><span class="hide">Dossier</span></button><button class="icon-reply alert tiny" title="Rappeler l'article" data-recall="0"><span class="hide">Rappeler</span></button></p></div></li>
				</ul>

			</div>

			<!--Publishing Box-->
			<!--
			<div id="publishing_box" class="spring-box publish">
				<span class="close" tabindex="0"></span>
				<fieldset>
					<div class="row collapse">
						<label for="publishing_day">Date de publication</label>
					</div>
					<div class="row collapse">
						<div class="column small-4"><select id="publishing_day"></select></div>
						<div class="column small-7"><select id="publishing_month"></select></div>
						<div class="column small-5"><select id="publishing_year"></select></div>
						<div class="column small-5"><select id="publishing_hour"></select></div>
						<div class="column small-3 text-right"><button class="icon-confirm success tiny" data-submit-publish><span class="hide">Publier</span></button></div>
					</div>
				</fieldset>
			</div>
			-->

			<!--Folder Box-->
			<!--
			<div id="folder_box" class="spring-box folder" style="display: none;">
				<span class="close right" tabindex="0"></span>
				<fieldset>
					<label for="folder">Dossier</label>
					<select id="folder" style="width: 20rem;">
						<option>folder1</option>
						<option>folder2</option>
						<option>folder3</option>
					</select>
					<button class="icon-confirm success tiny right" data-spring><span class="hide">Ajouter</span></button>
				</fieldset>
			</div>
			-->

			<script>
				////////////////////////////////////////////////////////////////
				// Variables (TEST only)
				////////////////////////////////////////////////////////////////
				db_folders = [
					{"id" : "1", "name" : "Dossier 1"},
					{"id" : "2", "name" : "Dossier 2"},
					{"id" : "3", "name" : "Dossier 3"},
					{"id" : "4", "name" : "Dossier 4"}
				];
				////////////////////////////////////////////////////////////////

				var article_list_dialogs = (function() {
					// Configuration
					var cfg = {
						"min_age"   : 1,                   // Integer  Year variation toward past (n - 1). Default : 1
						"max_age"   : 1,                   // Integer  Year variation toward future (n + 1). Default : 1
						"pub_name"  : "#publishing_box",   // Selector Publishing box element identifier. Default : "#publishing_box"
						"pub_day"   : "#publishing_day",   // Selector Day combo box identifier. Default : "#publishing_day"
						"pub_month" : "#publishing_month", // Selector Month combo box identifier. Default : "#publishing_month"
						"pub_year"  : "#publishing_year",  // Selector Year combo box identifier. Default : "#publishing_year"
						"pub_hour"  : "#publishing_hour",  // Selector Hour combo box identifier. Default : "#publishing_hour"
						"fld_name"  : "#folder_box"        // Selector Folder box element identifier. Default : "#folder_box"
					};
					// Variables
					var c, id, obj;
					var date = new Date();
					var day = date.getDate();
					var month = date.getMonth();
					var year = date.getFullYear();
					var hour = date.getHours();
					return {
						output_publishing : function() {
							// ===========================================================
							// # TEMP : Display publishing output
							// ===========================================================
							var d = parseInt(obj.find(cfg.pub_day).val());
							var m = parseInt(obj.find(cfg.pub_month + " option:selected").attr("id"));
							var y = parseInt(obj.find(cfg.pub_year).val());
							var h = parseInt(obj.find(cfg.pub_hour).val());
							// ===========================================================
							alert("article " + id + " (will be) published the " + d.toString().format(2) + "/" + (m + 1).toString().format(2) + "/" + y.toString().format(2) + " at " + h.toString() + ":00"); // DEBUG
							// ===========================================================
							// # TODO : Differ date for publising
							// ===========================================================
							// publishArticle(id);
							// ===========================================================
						},
						output_folder : function() {
							// ===========================================================
							// # TEMP : Display folder output
							// ===========================================================
							var fld = obj.find("#folder_select option:selected");
							// ===========================================================
							if (fld.is(":enabled")) {
								$("[data-folder='" + id + "']").attr("data-folder-id", fld.attr("data-id"));
								alert("article " + id + " put to folder " + fld.attr("data-id"));
							}
							// ===========================================================
							// # TODO : Update article's folder
							// ===========================================================
							// ...
							// ===========================================================
						},
						build_publishing : function() {
							obj = $(cfg.pub_name);
							obj.find("[data-submit-publish]").attr("data-submit-publish", id);
							obj.svg_icons(); // reload svg icons
							for (i = 1; i <= 31; i++) { // Build days
								var e = $("<option>");
								if (i == day) { e.attr("selected", true) }
								obj.find(cfg.pub_day).append(e.html(i));
							}
							for (i in $time.months) { // Build months
								var e = $("<option>", {"id": i});
								if (i == month) { e.attr("selected", true) }
								obj.find(cfg.pub_month).append(e.html($time.months[i].capitalize()));
							}
							for (i = year - cfg.min_age; i <= year + cfg.max_age; i++) { // Build years
								var e = $("<option>");
								if (i == year) { e.attr("selected", true) }
								obj.find(cfg.pub_year).append(e.html(i));
							}
							for (i = 0; i < 24; i++) { // Build hours
								var e = $("<option>");
								if (i == hour) { e.attr("selected", true) }
								obj.find(cfg.pub_hour).append(e.html(i.toString().format(2) + ":00"));
							}
						},
						build_folder : function() {
							obj = $(cfg.fld_name);
							obj.find("[data-submit-folder]").attr("data-submit-folder", id);
							$(".spring-box.folder").svg_icons(); // reload svg icons
							//////////////////////////////////////////////////////////
							// TODO : AJAX
							//////////////////////////////////////////////////////////
							// - good : 1. append folders list in select
							//          2. select the article's folder if any
							// - fail : display alert error
							//////////////////////////////////////////////////////////
							var fld_opts = "";
							for (i in db_folders) {
								var sel = "";
								if ($("[data-folder='" + id +"']").attr("data-folder-id") == db_folders[i].id) {
									sel = " selected";
								}
								fld_opts += "<option data-id='" + db_folders[i].id + "'" + sel + ">" + db_folders[i].name + "</option>";
							}
							obj.find("#folder_select").append(fld_opts);
							//////////////////////////////////////////////////////////
						},
						init : function(o) {
							var self = this;
							function show_bar(o) {
								o.attr("disabled", true); // disable calling element
								o.parent(".validate").addClass("show");
							}
							function hide_bar(o) {
								o.removeAttr("disabled");
								o.parent(".validate").removeClass("show");
								if (!o.parent(".validate").is(":hover")) {
									o.parent(".validate").fadeOut($conf.js_fx ? "fast" : 0);
								}
							}
							$(document).on("click", "[data-submit-publish], [data-submit-folder], .validate button, .tool-bar", function() {
								spring_box.close($(".spring-box")); // close spring box
							});
							$(document).on("click", "[data-publish]", function() {
								c = $(this);
								id = c.attr("data-publish"); // transfer article id through a variable
								show_bar(c); // lock button bar
								spring_box.create(c, {"box_id" : "publishing_box", "box_class" : "publish", "box_html" : file_pool.publishing_box_tmpl(), "box_focus" : ".success", "on_opened" : self.build_publishing, "on_close" : function() {hide_bar(c)}}); // create spring box
							});
							$(document).on("click", "[data-folder]", function() {
								c = $(this);
								id = c.attr("data-folder"); // transfer article id through a variable
								show_bar(c); // lock button bar
								spring_box.create(c, {"box_id" : "folder_box", "box_class" : "folder", "box_html" : file_pool.folder_box_tmpl(), "box_focus" : ".close", "on_opened" : self.build_folder, "on_close" : function() {hide_bar(c)}}); // create spring box
							});
							$(document).on("click", "[data-submit-publish]", function() {
								self.output_publishing(); // submit publishing
							});
							$(document).on("click", "[data-submit-folder]", function() {
								self.output_folder(); // submit folder
							});
						}
					}
				}());
				$(document).ready(function() {
					article_list_dialogs.init();
				});
			</script>

			<script>
				// Standbys Side Validation
				//$("#standby1 .over-block").hover(function() {$("#standby1_validation").css("display", "inline-block");});
				//$("#standby1").mouseleave(function() {
				//	if (!$("#standby1_validation").find("[data-publish]").attr("disabled")) { // NEW
				//		$("#standby1_validation").hide();
				//	}
				//});
				// Standbys Bottom Validation
				//$("#standby2 .over-block").hover(function() {$("#standby2_validation button").show();});
				//$("#standby2").mouseleave(function() {
				//	if (!$("#standby2_validation").find("[data-publish]").attr("disabled")) { // NEW
				//		$("#standby2_validation button").hide();
				//	}
				//});
				// Standbys Inside Validation
				//$("#standby3 .over-block").mouseenter(function() {$("#standby3_validation").show();});
				//$("#standby3 .over-block").mouseleave(function() {
				//	if (!$("#standby3_validation").find("[data-publish]").attr("disabled")) { // NEW
				//		$("#standby3_validation").hide();
				//	}
				//});
				// Drafts Side Validation
				//$("#draft1 .over-block").hover(function() {$("#draft1_validation").css("display", "inline-block");});
				//$("#draft1").mouseleave(function() {$("#draft1_validation").hide();});
				// Drafts Bottom Validation
				//$("#draft2 .over-block").hover(function() {$("#draft2_validation button").show();});
				//$("#draft2").mouseleave(function() {$("#draft2_validation button").hide();});
				// Drafts Inside Validation
				//$("#draft3 .over-block").mouseenter(function() {$("#draft3_validation").show();});
				//$("#draft3 .over-block").mouseleave(function() {$("#draft3_validation").hide();});
				//$("#draft4 .over-block").mouseenter(function() {$("#draft4_validation").show();});
				//$("#draft4 .over-block").mouseleave(function() {$("#draft4_validation").hide();});
				$(".over-block").mouseenter(function() {$(this).find(".validate").show();});
				$(".over-block").mouseleave(function() {
					if (!$(this).find(".validate").hasClass("show")) { // NEW
						$(this).find(".validate").hide();
					}
				});
			</script>

			<!--------------------------------------------------------------->
			<!--| Articles Displaying |-->
			<!--------------------------------------------------------------->
			<div id="articles_displaying">
				<h4>Articles displaying</h4>
				<ul class="article-list latest">
					<!--Last Web Review-->
					<li class="web-review struggles">
						<div class="topic"><h4 class="rubric">Luttes</h4></div>
						<div class="over-block">
							<h4 class="title">Derni&egrave;re revue du web</h4>
							<p class="overview">
								<span class="hide">Publi&eacute; le </span><time datetime="2014-11-23" class="date tiny icon-date">23 novembre 2014</time>
								<span class="summary">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec aliquet eros eros, eget faucibus massa commodo id. Fusce tempus enim a ipsum mattis commodo. In hac habitasse platea dictumst. Nulla vel venenatis tellus, ut porttitor lacus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Vestibulum et tincidunt leo, vitae luctus felis. Aliquam at mollis urna. Nullam sodales luctus porta. Sed dapibus eget lorem non pretium. Suspendisse sed aliquam libero, semper luctus nulla. Sed interdum lacus varius libero rhoncus mattis. Cras consequat est non risus lobortis, a volutpat augue congue. Etiam nec commodo augue. Nulla dignissim velit vitae orci consectetur varius.<br>Nulla luctus facilisis purus, non dignissim magna vehicula vitae. Nunc arcu arcu, posuere a dolor eu, iaculis cursus mauris. Curabitur id libero at nulla aliquam molestie sit amet vitae massa. In hac habitasse platea dictumst. Sed convallis ut tortor eu dictum. Fusce tempus ipsum vitae metus.</span>
								<strong class="author">Nadejda</strong>
							</p>
							<a href="javascript:void(0)" class="over">Lire l&rsquo;article</a>
						</div>
					</li>
					<!--Last Articles-->
					<li class="block struggles">
						<div class="topic"><h4 class="rubric">Luttes</h4></div>
						<div class="over-block">
							<h4 class="title">Derni&egrave;re revue du web</h4>
							<p class="overview">
								<span class="hide">Publi&eacute; le </span><time datetime="2014-11-23" class="date tiny icon-date">23 novembre 2014</time>
								<span class="summary">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec aliquet eros eros, eget faucibus massa commodo id. Fusce tempus enim a ipsum mattis commodo. In hac habitasse platea dictumst. Nulla vel venenatis tellus, ut porttitor lacus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Vestibulum et tincidunt leo, vitae luctus felis. Aliquam at mollis urna. Nullam sodales luctus porta. Sed dapibus eget lorem non pretium. Suspendisse sed aliquam libero, semper luctus nulla. Sed interdum lacus varius libero rhoncus mattis. Cras consequat est non risus lobortis, a volutpat augue congue. Etiam nec commodo augue. Nulla dignissim velit vitae orci consectetur varius.<br>Nulla luctus facilisis purus, non dignissim magna vehicula vitae. Nunc arcu arcu, posuere a dolor eu, iaculis cursus mauris. Curabitur id libero at nulla aliquam molestie sit amet vitae massa. In hac habitasse platea dictumst. Sed convallis ut tortor eu dictum. Fusce tempus ipsum vitae metus.</span>
								<strong class="author">Nadejda</strong>
							</p>
							<a href="javascript:void(0)" class="over">Lire l&rsquo;article</a>
						</div>
					</li>
					<li class="block struggles">
						<div class="topic"><h4 class="rubric">Luttes</h4></div>
						<div class="over-block">
							<h4 class="title">No pasaran&nbsp;!</h4>
							<p class="overview">
								<span class="hide">Publi&eacute; le </span><time datetime="2014-09-11" class="date tiny icon-date">11 septembre 2014</time>
								<span class="summary">Lorem ipsum dolor sit amet, consectetur adipiscing elit. In eleifend feugiat risus vel convallis. Nam quis lacinia orci, at sed.</span>
								<strong class="author">Ourse dithyrambique du pays des merveilles</strong>
							</p>
							<a href="javascript:void(0)" class="over">Lire l&rsquo;article</a>
						</div>
					</li>
					<li class="block educult">
						<div class="topic"><h4 class="rubric">Education &amp; Culture</h4></div>
						<div class="over-block">
							<h4 class="title">Sexisme dans les jeux-vid&eacute;os, une critique impossible&nbsp;?</h4>
							<p class="overview">
								<span class="hide">Publi&eacute; le </span><time datetime="2014-09-01" class="date tiny icon-date">1<sup>er</sup> septembre 2014</time>
								<span class="summary">Ces derni&egrave;res ann&eacute;es sur le net et dans les milieux f&eacute;ministes anglophones et francophones, des d&eacute;bats et discussions sont n&eacute;s autour de la question des repr&eacute;sentations sexistes dans les jeux-vid&eacute;os et des comportements sexistes parmi les joueurs. Les r&eacute;actions de rejet particuli&egrave;rement virulentes de la part de ceux qui se sentent mis en cause, comme on a pu le constater suite aux d&eacute;chaînements qu&rsquo;ont subis entres autres Anita Sarkeesian et Mar-Lard, conduisent cependant &agrave; s&rsquo;interroger sur la possibilit&eacute; m&ecirc;me de mener une telle r&eacute;flexion.</span>
								<strong class="author">Ourse du Cheshire</strong>
							</p>
							<a href="javascript:void(0)" class="over">Lire l&rsquo;article</a>
						</div>
					</li>
					<li class="block struggles">
						<div class="topic"><h4 class="rubric">Luttes</h4></div>
						<div class="over-block">
							<h4 class="title">J&rsquo;accuse&nbsp;! Je suppute, je subodore et je sudoku&nbsp;!</h4>
							<p class="overview">
								<span class="hide">Publi&eacute; le </span><time datetime="2013-11-13" class="date tiny icon-date">13 novembre 2013</time>
								<span class="summary">Cet article est g&eacute;nial&nbsp;! Lisez-le.</span>
								<strong class="author">Janine</strong>
							</p>
							<a href="javascript:void(0)" class="over">Lire l&rsquo;article</a>
						</div>
					</li>
					<li class="block internat">
						<div class="topic"><h4 class="rubric">International</h4></div>
						<div class="over-block">
							<h4 class="title">Ce ne sont pas des mangeuses de pierres&nbsp;: toute la v&eacute;rit&eacute; sur les femmes naines</h4>
							<p class="overview">
								<span class="hide">Publi&eacute; le </span><time datetime="2013-06-15" class="date tiny icon-date">15 juin 2013</time>
								<span class="summary">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec aliquet eros eros, eget faucibus massa commodo id. Fusce tempus enim a ipsum mattis commodo.</span>
								<strong class="author">Pauline Personne</strong>
							</p>
							<a href="javascript:void(0)" class="over">Lire l&rsquo;article</a>
						</div>
					</li>
				</ul>
			</div>
			<script>
				var block_list = (function() {
					// Configuration
					var cfg = {
						"list_name"    : ".article-list.latest", // [sel] The element targeted by the component. Default : ".article-list.latest"
						"item_name"    : ".block",                // [sel] The element's child targeted by the component. Default : ".block"
						"base_name"    : ".over-block",           // [sel] The inner element that will be resized (can be the item itself). Default : ".over-block"
						"desc_name"    : ".summary",              // [sel] A inner text element that can be adjusted in length. Default : ".summary"
						"desc_max_len" : 256,                     // [int] Maximum number of characters of the description (0 for none). Default : 256
						"desc_max_str" : "&nbsp;&hellip;",        // [str] Pattern for description replacement on maximum size reaching. Default : "&nbsp;&hellip;"
						"reload_delay" : 250                      // [int] Time before component reloads after a screen width change (milliseconds). Default : 250
					};
					// Instance variables
					var list = null;
					var item = null;
					var base = null;
					// Instance functions
					function get_num_by_line() {
						return Math.floor(list.outerWidth() / item.width()); // Compute number of items by line
					}
					// Instance methods
					return {
						update : function() {
							var i = 0, a = [], z = item.size(), n = get_num_by_line();
							item.each(function() {
								var desc = $(this).find(cfg.desc_name);
								// Truncate description
								if (cfg.desc_max_len > 0 && desc.text().length > cfg.desc_max_len) {
									desc.html(desc.text().trunc(cfg.desc_max_len) + cfg.desc_max_str)
								}
								// Equalize minimal height
								if (n > 1) {
									// Register item base height
									a.push($(this).find(cfg.base_name).outerHeight());
									if ((i > 0 && (i + 1) % n == 0) || (i == z - 1)) {
										a.sort(function(min, max) {return max-min});
										// Set maximum items base height for the current line
										var h = a.shift().toString().toRem() + "rem";
										// Get items range (i.e. all items indexes of current line)
										var i_min = (i == z - 1 && (i + 1) % n != 0 ? (z - 1) - ((i + 1) % n) : i - n);
										var i_max = (i + 1);
										var i_start = i_min <= 0 ? "" : ":gt(" + i_min + ")";
										var i_end = ":lt(" + i_max + ")";
										// Set item average height for items on current line
										list.find(cfg.item_name + i_start + i_end + " " + cfg.base_name).css("min-height", h);
										a = []; // Reset items base height array
									}
								}
								i++; // Increment items index
							});
						},
						init : function() {
							// Initialize
							list = $(cfg.list_name);
							item = list.find($(cfg.item_name));
							base = list.find($(cfg.base_name));
							var self = this, t = 0;
							// Execution
							list.data("num_by_line", get_num_by_line()); // Register number of items by line for later
							self.update();
							// Document events
							$(window).resize(function() {
								var n = get_num_by_line();
								if (list.data("num_by_line") != n) {
									list.data("num_by_line", n);
									clearTimeout(t);
									t = setTimeout(function() {
										base.css("min-height", ""); // Reset items base height
										self.update(); // Reload component
									}, cfg.reload_delay);
								}
							});
						}
					}
				}());
				$(document).ready(function() {
					block_list.init();
				});
			</script>

			<!--------------------------------------------------------------->
			<!--| Social Networkds Widgets |-->
			<!--------------------------------------------------------------->
			<div id="social_networks_widgets">
				<h4>Social Networks Widgets</h4>

				<!------------------------------------------------------------->
				<!--| Twitter Timeline |-->
				<!------------------------------------------------------------->

				<!--Twitter Widgets API (in-page include)-->
				<script src="https://platform.twitter.com/widgets.js" id="twitter-wjs"></script>
				<!--Twitter Widgets API (post-load include)-->
				<!--
				<script>
					window.twttr=(function(d, s, id) {
						var js, fjs = d.getElementsByTagName(s)[0], t = window.twttr || {};
						if (d.getElementById(id)) return;
						js = d.createElement(s); js.id = id;
						js.src = "https://platform.twitter.com/widgets.js";
						fjs.parentNode.insertBefore(js, fjs);
						t._e = []; t.ready = function(f) { t._e.push(f); }; return t;
					}(document, "script", "twitter-wjs"));
				</script>
				-->

				<!--Twitter Timeline Plugin-->
				<div style="overflow: hidden;">
					<div class="twitter-timeline" data-widget-id="459348418981134337" data-tweet-limit="4" data-theme="light" data-link-color="#666688" data-border-color="#dcdcdc" width="282"></div>
				</div>
				<!------------------------------------------------------------->
				<!--| Facebook Likebox |-->
				<!------------------------------------------------------------->

				<!--Facebook Widgets API (in-page include)-->
				<!--
				<script src="//connect.facebook.net/fr_FR/sdk.js#xfbml=1&amp;version=v2.0" id="facebook-jssdk"></script>
				-->
				<!--Facebook Widgets API (post-load include)-->
				<!--
				<div id="fb-root"></div>
				<script>
				(function(d, s, id) {
					var js, fjs = d.getElementsByTagName(s)[0];
					if (d.getElementById(id)) return;
					js = d.createElement(s); js.id = id;
					js.src = "//connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v2.0";
					fjs.parentNode.insertBefore(js, fjs);
				}(document, "script", "facebook-jssdk"));
				</script>
				-->

				<div style="height: 182px; overflow: hidden;">
					<!--Facebook Like Box Plugin (server-less, do not require Javascript SDK)-->
					<iframe src="https://www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2Fpages%2FLes-Ourses-%25C3%25A0-plumes%2F223829591145074&#038;colorscheme=light&#038;show_faces=true&#038;stream=false&#038;show_border=false&#038;header=false&#038;force_wall=false" scrolling="no" frameborder="0" style="width: 100%; height: 236px;"></iframe>
					<!--Facebook Like Box Plugin (web only, require Javascript SDK)-->
					<!--<div class="fb-like-box" data-href="https://www.facebook.com/pages/Les-Ourses-%C3%A0-plumes/223829591145074" data-colorscheme="light" data-show-faces="true" data-header="false" data-stream="false" data-show-border="false" data-force-wall="false" data-width="100%"></div>-->
				</div>

				<!------------------------------------------------------------->
				<!--| Customize Widgets |-->
				<!------------------------------------------------------------->

				<script>
					(function() {
						// console.log("start"); // DEBUG
						var o = "iframe.twitter-timeline"; // target selector
						var d = 250; // check for widget every 250 milliseconds
						var t = 5000; // end checking after 5 seconds
						var l = setInterval(function() {
							// Twitter Timeline
							if ($(o).length > 0 && $(o).css("width") == "282px") {
								// console.log("widget is set and width is defined => apply custom settings"); // DEBUG
								$(o).css("width", "100%"); // set full width style
								$(o).attr("height", ""); // reset height attribute (i.e. fix wrong shape bug)
								clearInterval(l); // clear interval
								clearTimeout(x); // clear timeout
							}
							// console.log("continue"); // DEBUG
						}, d);
						var x = setTimeout(function() {
							// console.log("exit"); // DEBUG
							clearInterval(l); // clear interval
						}, t);
					}());
				</script>

			</div>

		</div>

		<script>
			$build.container = false;
			load();
		</script>
	</body>
</html>
