<!doctype html>
<html lang="fr">
	<head>
		<script src="boot.js"></script>
		<!--Define Internal Template -->
		<script id="_template" type="text/x-dot-template">
			<div id="internal_tmpl">
				<h2 class="red">{{= data.title }}</h2>
				<table>
					<caption>{{= data.caption }}</caption>
					<tr>
						<th>Identifiant</th>
						<th>Adresse email</th>
						<th>Mot de passe</th>
					</tr>
					{{~ data.users:key }}
					<tr>
						<td>{{= key.login }}</td>
						<td>{{= key.mail || '<em style="color: grey;">Non renseign&eacute;</em>' }}</td>
						<td>{{= key.password || '<strong style="color: red;">Aucun</strong>' }}</td>
					</tr>
					{{~}}
				</table>
			</div>
		</script>
	</head>
	<body>
		<!--Dev Testbar-->
		<div id="dev_testbar" class="panel">
			<svg width="0" height="0" viewBox="0 0 48 48">
				<polygon points="27,35.59 40,22.59 40,31.91 24,47.91 8,31.91 8,22.59 21,35.59 21,0 27,0 "/>
			</svg>
			<h4>Voir</h4>
			<label for="show_internal_tmpl">Internal Templating</label>
			<input id="show_internal_tmpl" type="checkbox" name="show" value="internal_tmpl">
			<label for="show_external_tmpl">External Templating</label>
			<input id="show_external_tmpl" type="checkbox" name="show" value="external_tmpl" checked>
			<label for="show_advanced_tmpl">Advanced Templating</label>
			<input id="show_advanced_tmpl" type="checkbox" name="show" value="advanced_tmpl">
		</div>
		<script>
		// Live Events
		$("[name='show']").click(function() { $("#" + $(this).val()).toggle() });
		</script>
		<section id="dev_internal_templating">
			<!--Process Internal Template-->
			<script>
				var users_list = { // set data
						title: "Internal templating",
						caption: "Liste des utilisateurs",
						users: [
							{login: "Polluxette", mail: "polluxette@hotmail.com"},
							{login: "Casperine", mail: "casperine@gmail.com", password: "195033F0"},
							{login: "Sigmunda", password: "PAL0A983"}
						]},
						template = document.getElementById("_template").text, // retrieve template
						compiled = doT.compile(template); // compile template to var
				document.write(compiled(users_list)); // write templated data
			</script>
		</section>
		<section id="dev_external_templating">
		<!--Processed External Template will be put here-->
		</section>
		<script>
			var loax_pool = {
				"test_data" : $loc.json + "_dev_templating.json", // define data
				"templating_tmpl" : $loc.tmpl + "_dev_templating.tmpl" // define template
			};
			var loax = (function() {
				return {
					build : function() {
						/* Insert Template */
						$("#dev_external_templating").append(file_pool.templating_tmpl(file_pool.test_data)); // apply compiled data to DOM
					},
					init : function() {
						/* Dev Test Bar */
						$("[name='show']").each(function() {
							var f = $(this).val();
							if ($(this).is(":checked")) {
								$("#" + f).show();
							} else {
								$("#" + f).hide();
							}
						});
					}
				}
			}());
		</script>
		<script>
			$build.container = false;
			load();
		</script>
	</body>
</html>
