<!doctype html>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<script src="boot"></script>
	</head>
	<body>

		<h2 class="red">Liste des articles <small>.articles-list</small></h2>

		<!--Dev Testbar-->
		<div id="dev_testbar">
			<svg width="0" height="0" viewBox="0 0 48 48">
				<polygon points="27,35.59 40,22.59 40,31.91 24,47.91 8,31.91 8,22.59 21,35.59 21,0 27,0 "/>
			</svg>
			<h4>Voir</h4>
			<label for="show_articles_filtering">Articles filtering</label>
			<input id="show_articles_filtering" type="checkbox" name="show" value="articles_filtering" checked>
			<label for="show_articles_status">Articles status</label>
			<input id="show_articles_status" type="checkbox" name="show" value="articles_status">
			<label for="debug_marks">Masques</label>
			<input id="debug_marks" type="checkbox" value="true">
			<label for="long_strings">Texte &eacute;tendu</label>
			<input id="long_strings" type="checkbox" value="true" checked>
			<label>Largeur</label>
			<input id="section_width_slider" type="range" min="20" max="120" step="10" value="100">
			<span id="section_width_tip"></span>
		</div>
		<script>
			// Functions
			function change_width(selector) {
				var w = $(selector).val() + "%";
				$("section").css("width", w);
				$("#section_width_tip").text(w + " (" + $("section").outerWidth(true) + "px)");
			}
			function check_debug_marks(selector) {
				if ($(selector).is(":checked")) {
					$("section li:odd").css("background-color", "rgba(255, 0, 0, .5)");
					$("section li:even").css("background-color", "rgba(0, 255, 0, .5)");
					$("section > .clearfix > div").children().not("input").filter(":odd").css("background-color", "rgba(255, 255, 0, .5)");
					$("section > .clearfix > div").children().not("input").filter(":even").css("background-color", "rgba(0, 255, 255, .5)");
				} else {
					$("section li").css("background-color", "");
					$("section > .clearfix > div").children().css("background-color", "");
				}
			}
			function check_long_strings(selector) {
				if ($(selector).is(":checked")) {
					$("section > ul > li > h4").html("Ceci est l&rsquo;intitul&eacute; de la rubrique dans laquelle l&rsquo;article est index&eacute;");
					$(".href-block > .title").html("Ceci est un titre plut&ocirc;t long pour un article qui ne l&rsquo;est pas moins");
					$(".href-block > p > .summary-text").html("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec aliquet eros eros, eget faucibus massa commodo id. Fusce tempus enim a ipsum mattis commodo. In hac habitasse platea dictumst. Nulla vel venenatis tellus, ut porttitor lacus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Vestibulum et tincidunt leo, vitae luctus felis. Aliquam at mollis urna. Nullam sodales luctus porta. Sed dapibus eget lorem non pretium. Suspendisse sed aliquam libero, semper luctus nulla. Sed interdum lacus varius libero rhoncus mattis. Cras consequat est non risus lobortis, a volutpat augue congue. Etiam nec commodo augue. Nulla dignissim velit vitae orci consectetur varius.<br>Nulla luctus facilisis purus, non dignissim magna vehicula vitae. Nunc arcu arcu, posuere a dolor eu, iaculis cursus mauris. Curabitur id libero at nulla aliquam molestie sit amet vitae massa. In hac habitasse platea dictumst. Sed convallis ut tortor eu dictum. Fusce tempus ipsum vitae metus.");
					$(".href-block > p > .author > strong").html("Ceci est mon nom de plume");
					$(".other .href-block > p > .author > strong").html("Ceci est le nom de plume de l&rsquo;auteure de l&rsquo;article");
				} else {
					$("section > ul > li > h4").html("Rubrique");
					$(".href-block > .title").html("Titre.");
					$(".href-block > p > .summary-text").html("R&eacute;sum&eacute;.");
					$(".href-block > p > .author > strong").html("Moi");
					$(".other .href-block > p > .author > strong").html("Auteure");
				}
			}
			// Eventing
			$("html").on("click", "[name='show']", function() {
				var f = $(this).val();
				$("#" + f).toggle();
			});
			$("#section_width_slider").change(function() {change_width(this)});
			$("#section_width_slider").keyup(function() {change_width(this)});
			$("#debug_marks").change(function() {check_debug_marks(this)});
			$("#long_strings").change(function() {check_long_strings(this)});
			// Init
			// Initialization
			$(document).ready(function() {
				$("[name='show']").each(function() {
					var f = $(this).val();
					if ($(this).is(":checked")) {
						$("#" + f).show();
					} else {
						$("#" + f).hide();
					}
				});
				change_width("#section_width_slider");
				check_debug_marks("#debug_marks");
				check_long_strings("#long_strings")
			});
		</script>

		<!--Articles-->
		<section id="articles">

			<!--Article Toolbar-->
			<div class="articles-list-options clearfix">

				<div class="left">

					<!--Search-->
					<a id="search_text" href="javascript:void(0)" class="left icon-search" style="margin-right: .5rem;" title="Rechercher dans les articles" data-tooltip><span class="text">Chercher</span></a>
					<input id="search_input" type="text" class="left radius" style="display: none; margin: 0;  width: 12rem; height: 36px;">
					<script>
						$("#search_text").click(function() {
							$("#search_text").toggleClass("active");
							$("#search_text").blur();
							$("#search_input").toggle();
							$("#search_input").focus();
						});
					</script>

					<!--Sort-->
					<dl id="filters_list" class="sub-nav toggle left">
						<dt><a id="filter_icon" href="javascript:void(0)" class="left icon-filter" style="padding: 0;" title="Filtrer les articles" data-tooltip><span class="text">Filtrer</span></a></dt>
						<dd style="display: none;"><a id="standbys" href="javascript:void(0)">À vérifier</a></dd>
						<dd style="display: none;"><a id="others_drafts" href="javascript:void(0)">Brouillons des autres</a></dd>
						<dd style="display: none;"><a id="my_drafts" href="javascript:void(0)">Mes brouillons</a></dd>
						<dd style="display: none;"><a id="onlines" href="javascript:void(0)">En ligne</a></dd>
					</dl>
					<script>

						// DEBUG
						if (localStorage.getItem($user_prefs_articles_filters) !== null) {
							//console.log("user prefs is defined !"); // DEBUG
						} else {
							//console.log("user prefs not defined !"); // DEBUG
						}

						// vars -- WARNING : internal
						var articles_filters_prefs_defaults = { // "selector" : "bool" -- toggler : element visible?
							"#standbys" : "true",
							"#others_drafts" : "false",
							"#my_drafts" : "true",
							"#onlines" : "true"
						}
						var articles_filters_cfg = { // "selector" : "selector" -- toggler : element to hide/show
							"#standbys" : ".standby",
							"#others_drafts" : ".draft .other",
							"#my_drafts" : ".draft li:not(.other)",
							"#onlines" : ".articles-list:not(.draft):not(.standby)"
						};

						// methods
						function set_user_prefs_articles_filters(obj) { // register user prefs for articles filters in browser local storage
							var obj = obj || articles_filters_cfg;
							var usr = {};
							for (n in obj) {
								usr[n] = $(n).parent("dd").hasClass("active") ? "true" : "false";
							}
							//console.log("registered object = " + JSON.stringify(usr)); // DEBUG
							localStorage.setItem($user_prefs_articles_filters, JSON.stringify(usr));
						}
						function get_user_prefs_articles_filters(defaults) { // retrieve user prefs for articles filters in browser local storage
							var defaults = defaults || articles_filters_prefs_defaults;
							if (localStorage.getItem($user_prefs_articles_filters) == null) {
								//console.log("load defaults"); // DEBUG
								return defaults;
							} else {
								//console.log("load user prefs"); // DEBUG
								return JSON.parse(localStorage.getItem($user_prefs_articles_filters));
							}
						}
						function check_filters_switches(obj) { // toggle articles lists visibility according to filters
							var obj = obj || articles_filters_cfg;
							for (key in obj) {
								if ($(key).length > 0) { // if togger exists (n.b. role check is made in the template)
									if ($(key).parent("dd").hasClass("active")) {
										$(obj[key]).show();
									} else {
										$(obj[key]).hide();
									}
								}
							}
						}

						// events
						$("#filter_icon").click(function() {
							$("#filter_icon").toggleClass("active");
							$("#filter_icon").blur();
						});
						$("#filters_list").mouseenter(function() {
							$(this).find("dd").finish();
							$js_fx ? $(this).find("dd").fadeIn(250) : $(this).find("dd").show();
						});
						$("#filters_list").mouseleave(function() {
							//console.log("register user prefs filters"); // DEBUG
							set_user_prefs_articles_filters(); // register articles filters into user prefs on mouse leave
							if (!$("#filter_icon").hasClass("active")) {
								$js_fx ? $(this).find("dd").fadeOut(500) : $(this).find("dd").hide();
							}
						});
						$("html").on("click", "#standbys, #others_drafts, #my_drafts, #onlines", function() { // filters togglers events */
							$(this).parent("dd").toggleClass("active");
							check_filters_switches();
						});

						// init
						$(document).ready(function() { // set articles list visibility according to user prefs
							var obj = get_user_prefs_articles_filters();
							for (key in obj) {
								if (obj[key] == "true") {
									//console.log(key + " == true"); // DEBUG
									$(key).parent("dd").addClass("active");
								} else {
									//console.log(key + " == false"); // DEBUG
									$(key).parent("dd").removeClass("active");
								}
							}
							check_filters_switches()
						});

					</script>
				</div>

				<!--Write-->
				<div class="right">
					<a href="javascript:void(0)" class="icon-article medium" title="R&eacute;diger un nouvel article" data-tooltip><span class="text">&Eacute;crire</span></a>
				</div>

			</div>

			<!--UNUSED : Social Icons-->
			<!--
			<ul class="right inline-list hide-for-small">
				<li><span class="icon-twitter small">Twitter&#8239;:</span>&nbsp;7</li>
				<li><span class="icon-facebook small">Facebook&#8239;:</span>&nbsp;6</li>
				<li><span class="icon-googleplus small">GooglePlus&#8239;:</span>&nbsp;1</li>
			</ul>
			-->

			<!--Articles Filtering-->
			<div id="articles_filtering">
				<h4>Articles Filtering</h4>
				<ul class="no-bullet articles-list standby">
					<li>
						<h4 class="blue">Rubrique <small>&ldquo;my_draft&rdquo;</small></h4>
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="javascript:void(0)">Lire l&rsquo;article</a>
						</div>
					</li>
					<li>
						<h4 class="blue">Rubrique <small>&ldquo;my_draft&rdquo;</small></h4>
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="javascript:void(0)">Lire l&rsquo;article</a>
						</div>
					</li>
				</ul>
				<ul class="no-bullet articles-list draft">
					<li>
						<h4 class="blue">Rubrique <small>&ldquo;my_draft&rdquo;</small></h4>
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="javascript:void(0)">Lire l&rsquo;article</a>
						</div>
					</li>
					<li class="other" style="display: none;">
						<h4 class="blue">Rubrique <small>&ldquo;other_draft&rdquo;</small></h4>
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="index.html" data-show="null">Lire l&rsquo;article</a>
						</div>
					</li>
					<li>
						<h4 class="blue">Rubrique <small>&ldquo;my_draft&rdquo;</small></h4>
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="javascript:void(0)">Lire l&rsquo;article</a>
						</div>
					</li>
					<li class="other" style="display: none;">
						<h4 class="blue">Rubrique <small>&ldquo;other_draft&rdquo;</small></h4>
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="index.html" data-show="null">Lire l&rsquo;article</a>
						</div>
					</li>
				</ul>
				<ul class="no-bullet articles-list">
					<li>
						<h4 class="blue">Rubrique <small>&ldquo;my_draft&rdquo;</small></h4>
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="javascript:void(0)">Lire l&rsquo;article</a>
						</div>
					</li>
					<li>
						<h4 class="blue">Rubrique <small>&ldquo;my_draft&rdquo;</small></h4>
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="javascript:void(0)">Lire l&rsquo;article</a>
						</div>
					</li>
				</ul>
			</div>

			<div id="articles_status">
				<!--Articles Status-->
				<h4>Articles Status</h4>

				<!--Drafts-->
				<ul class="no-bullet articles-list draft">

					<!--Side Validation-->
					<li id="draft1">
						<h4 class="red">Rubrique <small>&ldquo;side_validation&rdquo;</small></h4>
						<div class="row collapse" style="margin: 0;">
							<div class="column small-10">
								<!--Href Block-->
								<div class="href-block clearfix red">
									<h5 class="title"></h5>
									<p class="summary">
										<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
										<span class="summary-text"></span>
										<span class="right author"><strong></strong></span>
									</p>
									<a href="index.html" data-show="null">Lire l&rsquo;article</a>
								</div>
							</div>
							<div class="column small-2">
								<!--Validation-->
								<div id="draft1_validation" style="margin-left: .5rem; display: none;">
									<button class="small" style="margin-bottom: .25rem;">Modifier</button>
									<br>
									<button class="small alert" style="margin-bottom: 0;">Valider</button>
								</div>
							</div>
						</div>
					</li>

					<!--Bottom Validation-->
					<li id="draft2">
						<h4 class="cyan">Rubrique <small>&ldquo;bottom_validation&rdquo;</small></h4>
						<!--Href Block-->
						<div class="href-block clearfix cyan">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="index.html" data-show="null">Lire l&rsquo;article</a>
						</div>
						<!--Validation-->
						<div id="draft2_validation" class="text-right" style="height: 2.25rem;">
							<button class="tiny" style="display: none; margin-top: .5rem; margin-bottom: 0;">Modifier</button><button class="alert tiny" style="display: none; margin-top: .5rem; margin-bottom: 0;">Valider</button>
						</div>
					</li>

					<!--Inside Validation-->
					<li id="draft3">
						<h4 class="blue">Rubrique <small>&ldquo;inside_validation&rdquo;</small></h4>
						<!--Href Block-->
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-edit small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="index.html" data-show="null">Lire l&rsquo;article</a>
							<!--Validation-->
							<div id="draft3_validation" style="display: none; position: absolute; top: 1.75rem; right: .625rem; margin-top: -1.125rem;">
								<button class="small" style="margin-bottom: 0; z-index: 100;">Modifier</button><button class="alert small" style="margin-bottom: 0; z-index: 100;">Valider</button>
							</div>
						</div>
					</li>
				</ul>

				<!--Standbys-->
				<ul class="no-bullet articles-list standby">

					<!--Side Validation-->
					<li id="standby1">
						<h4 class="red">Rubrique <small>&ldquo;side_validation&rdquo;</small></h4>
						<div class="row collapse" style="margin: 0;">
							<div class="column small-10">
								<!--Href Block-->
								<div class="href-block clearfix red">
									<h5 class="title"></h5>
									<p class="summary">
										<span class="icon-alert small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
										<span class="summary-text"></span>
										<span class="right author"><strong></strong></span>
									</p>
									<a href="index.html" data-show="null">Lire l&rsquo;article</a>
								</div>
							</div>
							<div class="column small-2">
								<!--Validation-->
								<div id="standby1_validation" style="margin-left: .5rem; display: none;">
									<button class="small success" style="margin-bottom: .25rem;">Publier</button>
									<br>
									<button class="small alert" style="margin-bottom: 0;">Renvoyer</button>
								</div>
							</div>
						</div>
					</li>

					<!--Bottom Validation-->
					<li id="standby2">
						<h4 class="cyan">Rubrique <small>&ldquo;bottom_validation&rdquo;</small></h4>
						<!--Href Block-->
						<div class="href-block clearfix cyan">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-alert small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="index.html" data-show="null">Lire l&rsquo;article</a>
						</div>
						<!--Validation-->
						<div id="standby2_validation" class="text-right" style="height: 2.25rem;">
							<button class="tiny success" style="display: none; margin-top: .5rem; margin-bottom: 0;">Publier</button><button class="alert tiny" style="display: none; margin-top: .5rem; margin-bottom: 0;">Renvoyer</button>
						</div>
					</li>

					<!--Inside Validation-->
					<li id="standby3">
						<h4 class="blue">Rubrique <small>&ldquo;inside_validation&rdquo;</small></h4>
						<!--Href Block-->
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-alert small"></span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="index.html" data-show="null">Lire l&rsquo;article</a>
							<!--Validation-->
							<div id="standby3_validation" style="display: none; position: absolute; top: 1.75rem; right: .625rem; margin-top: -1.125rem;">
								<button class="small success" style="margin-bottom: 0; z-index: 100;">Publier</button><button class="alert small" style="margin-bottom: 0; z-index: 100;">Renvoyer</button>
							</div>
						</div>
					</li>

				</ul>

				<!--Onlines-->
				<ul class="no-bullet articles-list">
					<li>
						<h4 class="red">Rubrique</h4>
						<div class="href-block clearfix red">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-date small" title="Date de publication">Publi&eacute; le </span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="index.html" data-show="null">Lire l&rsquo;article</a>
						</div>
					</li>
					<li>
						<h4 class="cyan">Rubrique</h4>
						<div class="href-block clearfix cyan">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-date small" title="Date de publication">Publi&eacute; le </span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="index.html" data-show="null">Lire l&rsquo;article</a>
						</div>
					</li>
					<li>
						<h4 class="blue">Rubrique</h4>
						<div class="href-block clearfix blue">
							<h5 class="title"></h5>
							<p class="summary">
								<span class="icon-date small" title="Date de publication">Publi&eacute; le </span><time datetime="2014-09-01" class="date">1<sup>er</sup> septembre 2014</time>
								<span class="summary-text"></span>
								<span class="right author"><strong></strong></span>
							</p>
							<a href="index.html" data-show="null">Lire l&rsquo;article</a>
						</div>
					</li>
				</ul>
			</div>

		</section>

		<script>
			// Drafts Side Validation
			$("#draft1 .href-block").hover(function() {$("#draft1_validation").css("display", "inline-block");});
			$("#draft1").mouseleave(function() {$("#draft1_validation").hide();});
			// Drafts Bottom Validation
			$("#draft2 .href-block").hover(function() {$("#draft2_validation button").show();});
			$("#draft2").mouseleave(function() {$("#draft2_validation button").hide();});
			// Drafts Inside Validation
			$("#draft3 .href-block").mouseenter(function() {$("#draft3_validation").show();});
			$("#draft3 .href-block").mouseleave(function() {$("#draft3_validation").hide();});

			// Standbys Side Validation
			$("#standby1 .href-block").hover(function() {$("#standby1_validation").css("display", "inline-block");});
			$("#standby1").mouseleave(function() {$("#standby1_validation").hide();});
			// Standbys Bottom Validation
			$("#standby2 .href-block").hover(function() {$("#standby2_validation button").show();});
			$("#standby2").mouseleave(function() {$("#standby2_validation button").hide();});
			// Standbys Inside Validation
			$("#standby3 .href-block").mouseenter(function() {$("#standby3_validation").show();});
			$("#standby3 .href-block").mouseleave(function() {$("#standby3_validation").hide();});
		</script>

		<script>
			$build_container = false;
			load();
		</script>
		<script>
			loap.update()
		</script>
		<script>
			$(document).foundation();
		</script>
	</body>
</html>
